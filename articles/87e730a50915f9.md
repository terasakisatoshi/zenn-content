---
title: "JuliaRegistrator ã‚„ TagBot ã§tag æ‰“ã¡ã‚’ã—ã¦ã‚‚ stable Document ãŒç”Ÿæˆã•ã‚Œãªã„å¯¾å‡¦æ³•"
emoji: "ğŸ•Œ"
type: "tech"
topics:
  - "julia"
published: true
published_at: "2022-03-28 19:09"
---

# æœ¬æ—¥ã¯

General ã«ç™»éŒ²ã—ãŸï¼ˆâ‰’ã„ã‚ã‚†ã‚‹å…¬å¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ã‚‚ã®ï¼‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ—¥ã€…ãƒ¡ãƒ³ãƒ†ã—ã¦ã„ãã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ãƒ¡ãƒ³ãƒ†ã—ãŸããªã‚Šã¾ã™ï¼stable ç‰ˆã®ãƒªãƒ³ã‚¯ãŒç”Ÿæˆã•ã‚Œãªã„å•é¡Œã‚’è§£æ±ºã—ã¾ã—ãŸã®ã§æƒ…å ±å…±æœ‰ã—ãŸã„ã¨æ€ã„ã¾ã™.

# ç¾è±¡

ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚°ã‚’ã¤ã‘ã¦ã‚‹ã®ã«å¯¾å¿œã™ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒªãƒ³ã‚¯ãŒä½œæˆã•ã‚Œãªã„.

![](https://storage.googleapis.com/zenn-user-upload/f199bfe13dad-20220328.png)

`dev` ã—ã‹å‡ºãªã„ãŒãƒ»ãƒ»ãƒ»ï¼Ÿï¼Ÿï¼Ÿ

# æœŸå¾…ã™ã‚‹çµæœ

Julia ã® Documentation ã®ã‚ˆã†ã«å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒªãƒ³ã‚¯ãŒä½œæˆã•ã‚Œã¦æ¬²ã—ã„

![](https://storage.googleapis.com/zenn-user-upload/db946dfea2ed-20220328.png)

# åˆ†ã‹ã£ãŸã“ã¨

`DOCUMENTERï¼¿KEY` ã®è¨­å®šã‚’è¡Œã†å¿…è¦ãŒã‚ã£ãŸ.

# æ–‡è„ˆã®è£œè¶³

ãªãœã“ã†ã„ã†è©±ãŒå‡ºã¦ãã‚‹ã‚ˆã†ã«ãªã£ãŸã‹ã®æ–‡è„ˆã‚’è£œè¶³ã—ã¾ã™ï¼å…¬å¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã‚ã¨ãƒ¡ãƒ³ãƒ†ã™ã‚‹éš›ã«ãƒãƒã‚‹æ°—ãŒã—ãŸã®ã§æ›¸ã„ã¦ãŠã“ã†ã¨æ€ã£ãŸã‹ã‚‰ã§ã™ï¼

## å…¬å¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ç™»éŒ²ã—ãŸå¾Œã®ãƒ¡ãƒ³ãƒ†æ–¹æ³•

æ˜”æ›¸ã„ãŸ Qiita è¨˜äº‹ã‚‚å‚è€ƒã«ã—ã¦ãã ã•ã„:
  - https://qiita.com/SatoshiTerasaki/items/7dbb809c962e794a9df6

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ›´æ–°

ä¾‹ãˆã°ï¼Œèª­è€…ã¯ï¼ŒPkgTemplates.jl ã‚’åˆ©ç”¨ã—ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é››å½¢ã‚’ä½œã£ãŸã¨ã—ã¾ã™ï¼ãã—ã¦ä½•ã‹ã—ã‚‰ã®æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ Julia ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ GitHub ãªã©ã§å…¬é–‹ã—ãŸã¨ã—ã¾ã™. ãã‚Œã‚’ Julia ã®ï¼Œã€Œã„ã‚ã‚†ã‚‹å…¬å¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã«ã—ãŸã¨ã—ã¾ã™ï¼ã“ã“ã§ã€Œã„ã‚ã‚†ã‚‹å…¬å¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã¨ã„ã†ã®ã¯ Julia ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æƒ…å ±ã‚’æ ¼ç´ã™ã‚‹ [General ãƒ¬ã‚¸ã‚¹ãƒˆãƒª](https://github.com/JuliaRegistries/General
) ã«ç™»éŒ²ã•ã‚ŒãŸã‚‚ã®ã‚’æŒ‡ã—ã¦ã„ã¾ã™.

åˆæœŸã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ `0.1.0` ã‹ã‚‰æ©Ÿèƒ½è¿½åŠ ï¼Œãƒã‚°ä¿®æ­£ã‚’ main ãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸ã—ãã‚ãã‚å®‰å®šæ¿ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã„ã¨ä»®å®šã—ã¾ã™. ä¾‹ãˆã°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’ `0.2.0` ã¨ã—ã¦ãƒªãƒªãƒ¼ã‚¹ã—ãŸã„ã¨ã—ã¾ã™.

ã©ã†ã„ã†ãµã†ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’ä¸Šã’ã¦ã„ãã‹ã¯ https://semver.org/#summary ã‚’è¦‹ã‚‹ã¨è‰¯ã„ã§ã™ï¼

ã¾ãšã¯ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® `Project.toml` ã‚’ç·¨é›†ã— `0.1.0` ã‚’ `0.2.0` ã«å¤‰æ›´ã—ã¾ã—ã‚‡ã†ï¼

Before:

```toml:Project.toml
name = "YourPkg"
uuid = "xxxxxxx"
authors = ["Goma-chan kawaii and contributors"]
version = "0.1.0"
```

After:

```toml:Project.toml
name = "YourPkg"
uuid = "xxxxxxx"
authors = ["Goma-chan kawaii and contributors"]
version = "0.2.0"
```

ã“ã®å¤‰æ›´ã‚’è¡Œã†, ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œã‚Š, ã‚³ãƒŸãƒƒãƒˆ, ãã—ã¦ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã ã—ã¦ GitHubAction ã® CI ãŒé€šã£ãŸã“ã¨ã‚’ç¢ºèªã—ãƒãƒ¼ã‚¸ã—ã¾ã™ï¼

### ä½œæ¥­ã‚’ã€€JuliaRegistratorã€€bot ã«ä¾é ¼

GitHub ã®ãƒªãƒã‚¸ãƒˆãƒªç›´ä¸‹ã§ãƒãƒ¼ã‚¸ã—ãŸå¾Œã®ã‚³ãƒŸãƒƒãƒˆã®ãƒãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ï¼ˆä¸‹å›³å‚ç…§ï¼Œã“ã®å ´åˆ `fc16524` ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼‰ï¼

![](https://storage.googleapis.com/zenn-user-upload/69a318883b0f-20220328.png)

ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã§ä¸‹è¨˜ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦æ›¸ãã¾ã™. 

```
@JuliaRegistrator register
```

[ã“ã®ãƒªãƒ³ã‚¯](https://github.com/AtelierArith/Replay.jl/commit/fc1652434fa5270c4199784704120a7a9e2923ff) ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„:

ã‚ã¨ã¯å…¨ã¦ `JuliaRegistrator` bot General ã«è‡ªå‹•ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã™.
General å´ã§ã®CIãŒé€šã‚Šç‰¹ã«å•é¡ŒãŒãªã‘ã‚Œã°è‡ªå‹•çš„ã«ãƒãƒ¼ã‚¸ã•ã‚Œã¾ã™ï¼

### ãã®ã‚ã¨ã¯ï¼Ÿ

ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã«ã‚ã‚‹ PkgTemplates.jl ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é››å½¢ã‚’ä½œã‚‹æ–¹æ³•ã«å¾“ã†ã¨ã€€`.github/workflows/TagBot.yml` ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™:

```yml
name: TagBot
on:
  issue_comment:
    types:
      - created
  workflow_dispatch:
jobs:
  TagBot:
    if: github.event_name == 'workflow_dispatch' || github.actor == 'JuliaTagBot'
    runs-on: ubuntu-latest
    steps:
      - uses: JuliaRegistries/TagBot@v1
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          ssh: ${{ secrets.DOCUMENTER_KEY }}
```

General ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã§è‡ªå‹•PRãŒãƒãƒ¼ã‚¸ã•ã‚Œã‚‹ã¨ã“ã®çµæœã‚’ãƒˆãƒªã‚¬ãƒ¼ã«ã— `TagBot.yml` ã§å®šç¾©ã•ã‚ŒãŸ Action ãŒå‹•ä½œã—ã¾ã™. ã“ã‚Œã§ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚° `v0.2.0` ãŒ Release ãƒšãƒ¼ã‚¸ã«ç”Ÿæˆã•ã‚Œã¾ã™ï¼

# ã“ã“ã‹ã‚‰ãŒæœ¬ç•ª

ã•ã¦ï¼Œæœ¬æ¥ãªã‚‰ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚°ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ v0.2.0 ç”¨ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒ Documenter.jl ã«ã‚ˆã£ã¦ä½œã‚‰ã‚Œã‚‹ã¯ãšã§ã™ï¼ã§ã‚‚å‡ºãªã„ã‚“ã§ã™ï¼

# TagBot ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€

https://github.com/JuliaRegistries/TagBot ã® README ã‚’èª­ã¿ã¾ã—ã‚‡ã†.

> You may, however, want to customize the behaviour via the available configuration options.
>
> For example, if you use GitHub Actions to build the documentation for your package, you will find that with the default TagBot configuration, your documentation build is not triggered when a new tag is created. In this case, you will need to use SSH Deploy Keys.
>
> Read on for a full description of all of the available configuration options.

ã¯ãƒ¼ã‚“ï¼ï¼ï¼

> your documentation build is not triggered when a new tag is created.

ãªã‚‹ã»ã©ï¼ã¤ã¾ã‚Šè‰²ã€…è¨­å®šãŒå¿…è¦ã ã£ãŸã‚ˆã†ã§ã™ï¼ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚°ã‚’ãƒªãƒã‚¸ãƒˆãƒªã®ç®¡ç†è€…ãŒæ‰‹å‹•ã§ä½œæˆã™ã‚‹å ´åˆã¯ç‰¹ã«å›°ã‚‹ã“ã¨ã¯ãªã„ã§ã™ã‘ã‚Œã©ï¼Œbotã‚’çµŒç”±ã—ã¦è‡ªå‹•ã§ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚°ã‚’ä½œã£ãŸå ´åˆã¯ `SSH Deploy Keys` ã‚’ä½œã‚‹å¿…è¦ãŒã‚ã‚‹ã‚ˆã†ã§ã™ï¼

# ä½œã‚Šæ–¹

ä½œæ¥­ã®æ–¹é‡ã¯ [Qiita ã«æ›¸ã„ã¦ã„ãŸã‚‚ã®](https://qiita.com/SatoshiTerasaki/items/f43a7730bcf57f4b9572) ã‚’ãƒ™ãƒ¼ã‚¹ã«ã™ã‚Œã°OKã§ã™ï¼Qiita ã®è¨˜äº‹ã¯å¤ããªã£ãŸã®ã§ Zenn ã®ä¸Šã§æ›´æ–°ã—ã¾ã™ï¼

## DocumenterTools.jl ã®å°å…¥

ä¸‹è¨˜ã®ã‚ˆã†ã« DocumenterTools.jl ã‚’å°å…¥ã—ã¾ã™.

```julia
julia> using Pkg
julia> Pkg.add("DocumenterTools")
```

REPL ã§ä¸‹è¨˜ã‚’å®Ÿè¡Œã—ã¾ã™:

```julia
julia> using DocumenterTools
julia> DocumenterTools.genkeys(user="YourGitHubUserName", repo="YourPkg.jl")
```

ã“ã“ã§ GitHub ã§ç®¡ç†ã—ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®URLãŒ `https://github.com/YourGitHubUserName/YourPkg.jl` ã®å ´åˆã‚’ä»®å®šã—ã¦ã„ã¾ã™.

`YourGitHubUserName` ã¯ä¼šç¤¾ã ã£ãŸã‚Šçµ„ç¹”ã ã£ãŸã‚Šã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“. é©å®œèª­ã¿æ›¿ãˆã¦ãã ã•ã„. å‡ºåŠ›ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

```julia:output
[ Info: add the public key below to https://github.com/YourGitHubUserName/YourPkg.jl/settings/keys with read/write access:

ssh-rsa <ã¿ã˜ã‹ãƒ¼ã„æ–‡å­—åˆ—>= Documenter

[ Info: add a secure environment variable named 'DOCUMENTER_KEY' to https://travis-ci.com/YourGitHubUserName/YourPkg.jl/settings (if you deploy using Travis CI) or https://github.com/YourGitHubUserName/YourPkg.jl/settings/secrets (if you deploy using GitHub Actions) with value:

<ãªãŒãƒ¼ãƒ¼ãƒ¼ã„æ–‡å­—åˆ—>
```

ä¸Šè¨˜ã®ãƒ­ã‚°ã‚’å†·é™ã«çœºã‚ã‚Œã°

```
https://github.com/YourGitHubUserName/YourPkg.jl/settings/keys
```

ã«ã‚¢ã‚¯ã‚»ã‚¹ã— `ssh-rsa <ã¿ã˜ã‹ãƒ¼ã„æ–‡å­—åˆ—>= Documenter` ã®å€¤ã‚’ç™»éŒ²ã™ã‚Œã°OKã§ã™ï¼ãã®éš›ã«`read/write access` ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™.

ã•ã‚‰ã«

```
https://github.com/YourGitHubUserName/YourPkg.jl/settings/secrets
``` 

ã«ã‚¢ã‚¯ã‚»ã‚¹ã— `DOCUMENTER_KEY` ã¨ã„ã†åå‰ã§ä¿å­˜ã—ã¾ã™ï¼ã“ã® `DOCUMENTER_KEY` ã¯ `TagBot.yml` ã«ã‚ã‚‹ã‚‚ã®ã¨å¯¾å¿œã—ã¦ã„ã‚‹ã¨ç†è§£ã™ã‚Œã°OKã§ã™ï¼

```yml:TagBot.yml
'JuliaTagBot'
    runs-on: ubuntu-latest
    steps:
      - uses: JuliaRegistries/TagBot@v1
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          ssh: ${{ secrets.DOCUMENTER_KEY }} # <---- ã“ã„ã¤ã®ã“ã¨
```

ã‚ã¨ã¯æ¬¡å›ã®ãƒªãƒªãƒ¼ã‚¹ä½œæ¥­ã‚’ã™ã‚Œã° TagBot ã•ã‚“ãŒ ssh ã‚­ãƒ¼ã‚’æ¤œçŸ¥ã—ã‚ˆã—ãªã« stable ç”¨ã®ãƒšãƒ¼ã‚¸ã‚’ä½œã£ã¦ãã‚Œã¾ã™ï¼