---
title: "JuliaHub ã‚’ä½¿ã£ã¦è¤‡æ•°ãƒãƒ¼ãƒ‰ã®Distributed Computingã‚’è©¦ã™"
emoji: "ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"
type: "tech"
topics:
  - "julia"
  - "juliahub"
published: true
published_at: "2022-05-01 20:55"
---

# æœ¬æ—¥ã¯

JuliaHub ã‚’ç”¨ã„ã¦åˆ†æ•£ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆDistributed computing) ã‚’è©¦ã™ãŠè©±ã§ã™ï¼

[JuliaHubã®å…¥é–€ã¯ã“ã“ã«ã‚‚æ›¸ãã¾ã—ãŸ](https://zenn.dev/terasakisatoshi/articles/566731a04a53b8)

ã“ã®è¨˜äº‹ã§ã¯ã¿ã‚“ãªå¤§å¥½ãã€Œä¹±æ•°ã‚’ç”¨ã„ãŸå††å‘¨ç‡ã®è¨ˆç®—ã€ã‚’è¤‡æ•°ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ä¸¦åˆ—è¨ˆç®—ã•ã›ã¾ã™ï¼ å¤§å­¦ã‚„ç ”ç©¶æ©Ÿé–¢ãªã©ç‰¹åˆ¥ãªæ©Ÿé–¢ã«æ‰€å±ã—ã¦ã„ãªã„ã‚ˆã†ãªæ™®é€šã®äººé–“ã§ã‚‚ï¼ˆãŠé‡‘ã•ãˆæ‰•ãˆã°ï¼‰ã§ãã¦ã—ã¾ã†ã®ã§ã™ï¼

ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹ä¸­ã®äººã¯ã€Œè‡ªè…¹ã§4å°ã®ãƒ©ã‚ºãƒ‘ã‚¤ã‚’è²·ã£ã¦ï¼Œ LANã‚±ãƒ¼ãƒ–ãƒ«ç¹‹ã„ã§MPIã«ã‚ˆã£ã¦ä¸¦åˆ—è¨ˆç®—ã‚’Pythonã§ãŠã“ãªã£ãŸã€ç¨‹åº¦ã®çµŒé¨“ã—ã‹ãªã„ã‚ˆãã‚ã‚‹ä¸€èˆ¬äººã§ã™ï¼ ãã‚Œã‚ˆã‚Šã‚‚å¤šã„ãƒãƒ¼ãƒ‰ã‚’ä½¿ã£ãŸã‚¹ãƒ‘ã‚³ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ã†ã®ã¯ JuliaHub ãŒåˆã‚ã¦ã«ãªã‚Šã¾ã™ï¼

ã“ã®è¨˜äº‹ã‚’èª­ã‚“ã æ–¹ã§æ™®æ®µã‚¹ãƒ‘ã‚³ãƒ³ã‚’è§¦ã£ã¦ã„ã‚‹æ–¹ãŒã„ã‚Œã°æ˜¯é JuliaHub ã‚’ä½¿ã£ã¦æ—¢å­˜ã®ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ¯”è¼ƒãƒ»æ‰€æ„Ÿã‚’æ›¸ã„ã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã›ã«ãªã‚‹äººãŒã„ã‚‹ã¨æ€ã„ã¾ã™ï¼

# å‰æ

- JuliaHub ã«ç™»éŒ²ã—ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰èªè¨¼ãŒé€šã£ãŸçŠ¶æ…‹
- æ‰‹å…ƒã§ç°¡å˜ãªJulia ã®ã‚³ãƒ¼ãƒ‰ã®è¨˜è¿°ãƒ»å®Ÿè¡ŒãŒã§ãã‚‹
- [Distributed.jl](https://docs.julialang.org/en/v1/manual/distributed-computing/) ã‚’ä½¿ã„ã“ãªã›ã‚Œã°å°šå¯.

# æ‰±ã†ãƒˆãƒ”ãƒƒã‚¯

[JuliaHub ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«](https://help.juliahub.com/juliahub_tutorials/vscode_extension/#juliahub_vscode_extension) ã‚’ãƒ™ãƒ¼ã‚¹ã«è©±ã‚’é€²ã‚ã¦ã„ãã¾ã™. ã¿ã‚“ãªå¤§å¥½ãä¹±æ•°ã«ã‚ˆã£ã¦å††å‘¨ç‡ã‚’è¨ˆç®—ã—ã¾ã™.

$[-1, 1]\times [-1, 1] \subset \mathbb{R}^2$ ã®é ˜åŸŸã§ãƒ©ãƒ³ãƒ€ãƒ ã«ç‚¹$(x, y)\in\mathbb{R}^2$ã‚’ç”Ÿæˆã—ã¾ã™. ã“ã®ç”Ÿæˆã‚’ $n$ å›ç¹°ã‚Šè¿”ã—ã¾ã—ã‚‡ã†.å„ã€…ã®è©¦è¡Œã§ç”Ÿæˆã•ã‚ŒãŸç‚¹ãŒåŠå¾„ãŒï¼‘ã®å††ã®ä¸­ã«æ‰€å±ã™ã‚‹ã‹ã©ã†ã‹ã‚’è¦³æ¸¬ã—ã¾ã™. ãã®æ§˜å­ã‚’æã„ãŸã®ãŒä¸‹è¨˜ã®å›³ã«ãªã‚Šã¾ã™.

![](https://storage.googleapis.com/zenn-user-upload/5bad800ab7ff-20220501.png)

ç·‘: å††ã®ä¸­ã«å…¥ã£ãŸç‚¹, èµ¤è‰²: å††ã®å¤–å´ã«æ‰€å±ã—ãŸç‚¹
> ç”»åƒã¯ä¸‹è¨˜ã®ãƒªãƒ³ã‚¯ã‹ã‚‰æŠœç²‹
> https://help.juliahub.com/juliahub_tutorials/vscode_extension/#executing_a_script

å††ã®é¢ç©ã‚’é ˜åŸŸã®é¢ç©ã§å‰²ã£ãŸå€¤ã¯ $\pi/4$ ã«ãªã‚Šã¾ã™ï¼ ã¨ã„ã†ã“ã¨ã§

```
4(å††ã®ä¸­ã«å…¥ã£ãŸç‚¹ã®æ•°)/n
```

ã‚’å††å‘¨ç‡ã®è¿‘ä¼¼å€¤ã¨ã—ã¦å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼

# ç”¨æ„ã™ã‚‹ã‚³ãƒ¼ãƒ‰

èª­è€…ãŒ JuliaHub ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’çœŸä¼¼ã§ãã‚‹ã‚ˆã†ã«ã‚³ã‚¢ãªãƒ­ã‚¸ãƒƒã‚¯ã¯

https://help.juliahub.com/juliahub_tutorials/vscode_extension/#distributed_job

ãã®ã¾ã¾ç”¨ã„ã‚‹ã“ã¨ã«ã—ã¾ã™. æ–¹é‡ã¯ä¸‹è¨˜ã®è¨ˆç®—ã‚’ã²ãŸã™ã‚‰å®Ÿè¡Œã•ã›ã‚‹ã ã‘

```julia
x, y = rand() * 2 - 1, rand() * 2 - 1
Int(x^2 + y^2 <= 1)
```

ã“ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯è¤‡æ•°å°ã®ãƒã‚·ãƒ³ã§ç‹¬ç«‹ã«è¨ˆç®—ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§åˆ†æ•£ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ç·´ç¿’ã«ã¯ã¡ã‚‡ã†ã©è‰¯ã„ç´ æã§ã™.


ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ `calcpi.jl` ã¨ã„ã†åå‰ã§ã²ã¨ã¾ãšä¿å­˜ã—ã¾ã™.

```julia:calcpi.jl
using Distributed

function estimate_pi_distributed(n)
    n > 0 || throw(ArgumentError("number of iterations must be > 0, got $n"))
    incircle = @distributed (+) for i in 1:n
        x, y = rand() * 2 - 1, rand() * 2 - 1
        Int(x^2 + y^2 <= 1)
    end
    return 4 * incircle / n
end

function main()
    @show nprocs()
    @show estimate_pi_distributed(1024)

    for k in 1:13
        n = Int(exp10(k))
        ret = @timed estimate_pi_distributed(n)
        @info "progress logging:" k=k n=n elapsed_time=ret.time log10_elapsed_time=log10(ret.time) pi_approx=ret.value
    end
end

main()
```

# æ‰‹å…ƒã®PCã§å®Ÿè¡Œ

å‹•ä½œç¢ºèªã®ãŸã‚æ‰‹å…ƒã®ãƒã‚·ãƒ³ã§å®Ÿè¡Œã—ã¦ã¿ã¾ã™.

```julia
	ã€€ã€€ã€€ã€€_
   _       _ _(_)_     |  Documentation: https://docs.julialang.org
  (_)     | (_) (_)    |
   _ _   _| |_  __ _   |  Type "?" for help, "]?" for Pkg help.
  | | | | | | |/ _` |  |
  | | |_| | | | (_| |  |  Version 1.6.6 (2022-03-28)
 _/ |\__'_|_|_|\__'_|  |  Official https://julialang.org/ release
|__/                   |

julia> versioninfo()
Julia Version 1.6.6
Commit b8708f954a (2022-03-28 07:17 UTC)
Platform Info:
  OS: macOS (x86_64-apple-darwin18.7.0)
  CPU: Intel(R) Core(TM) i9-9980HK CPU @ 2.40GHz
  WORD_SIZE: 64
  LIBM: libopenlibm
  LLVM: libLLVM-11.0.1 (ORCJIT, skylake)
```

```console
julia -p auto calcpi.jl
```

ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ `-p æ•°` ã§æŒ‡å®šã—ãŸæ•°ã®è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç«‹ã¡ä¸Šã’ã¦è¨ˆç®—ã‚’ä¸¦åˆ—å®Ÿè¡Œã•ã›ã¾ã™.
`auto` ã ã¨è«–ç†ã‚³ã‚¢åˆ†ã ã‘ç™ºç”Ÿã•ã›ã¾ã™ï¼

æ‰‹å…ƒã ã¨ä¸‹è¨˜ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã¾ã—ãŸ(çµ‚ã‚ã‚‰ãªã„ã®ã§é€”ä¸­ã§æ­¢ã‚ãŸ):

```console
julia -p auto calcpi.jl
nprocs() = 17
estimate_pi_distributed(1024) = 3.2265625
â”Œ Info: progress logging:
â”‚   k = 1
â”‚   n = 10
â”‚   elapsed_time = 0.00547458
â”‚   log10_elapsed_time = -2.261649193506851
â””   pi_approx = 3.6
â”Œ Info: progress logging:
â”‚   k = 2
â”‚   n = 100
â”‚   elapsed_time = 0.003604553
â”‚   log10_elapsed_time = -2.4431485843897405
â””   pi_approx = 3.2
â”Œ Info: progress logging:
â”‚   k = 3
â”‚   n = 1000
â”‚   elapsed_time = 0.001483053
â”‚   log10_elapsed_time = -2.828843328272869
â””   pi_approx = 3.172
â”Œ Info: progress logging:
â”‚   k = 4
â”‚   n = 10000
â”‚   elapsed_time = 0.001327724
â”‚   log10_elapsed_time = -2.8768921943464734
â””   pi_approx = 3.138
â”Œ Info: progress logging:
â”‚   k = 5
â”‚   n = 100000
â”‚   elapsed_time = 0.001279914
â”‚   log10_elapsed_time = -2.892819210492916
â””   pi_approx = 3.14728
â”Œ Info: progress logging:
â”‚   k = 6
â”‚   n = 1000000
â”‚   elapsed_time = 0.001757383
â”‚   log10_elapsed_time = -2.7551335790511238
â””   pi_approx = 3.140364
â”Œ Info: progress logging:
â”‚   k = 7
â”‚   n = 10000000
â”‚   elapsed_time = 0.012431846
â”‚   log10_elapsed_time = -1.9054643783504694
â””   pi_approx = 3.1405128
â”Œ Info: progress logging:
â”‚   k = 8
â”‚   n = 100000000
â”‚   elapsed_time = 0.105849097
â”‚   log10_elapsed_time = -0.9753128426005442
â””   pi_approx = 3.14166212
â”Œ Info: progress logging:
â”‚   k = 9
â”‚   n = 1000000000
â”‚   elapsed_time = 1.036959515
â”‚   log10_elapsed_time = 0.01576180098371608
â””   pi_approx = 3.141531148
â”Œ Info: progress logging:
â”‚   k = 10
â”‚   n = 10000000000
â”‚   elapsed_time = 10.796728385
â”‚   log10_elapsed_time = 1.0332921758951752
â””   pi_approx = 3.1416026752
â”Œ Info: progress logging:
â”‚   k = 11
â”‚   n = 100000000000
â”‚   elapsed_time = 132.697088801
â”‚   log10_elapsed_time = 2.1228613951211797
â””   pi_approx = 3.1415873828
```

CPUã®ä½¿ç”¨ç‡ã‚’è¦³æ¸¬ã™ã‚‹ã¨ã©ã®ã‚³ã‚¢ã‚‚ä¸€ç”Ÿæ‡¸å‘½åƒã„ã¦ã„ã‚‹æ§˜å­ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™.

æ®‹å¿µãªãŒã‚‰ä¸€å°ã®ãƒã‚·ãƒ³ã§ã¯`k=12, 13` ã®çµæœã¯æ®‹å¿µãªãŒã‚‰ã™ãã«ã¯æ±‚ã¾ã‚Šã¾ã›ã‚“ã§ã—ãŸï¼

# JuliaHub ã®å‡ºç•ªã§ã™

```julia
x, y = rand() * 2 - 1, rand() * 2 - 1
Int(x^2 + y^2 <= 1)
```

ã‚’è¤‡æ•°å°ã®PCã§è¨ˆç®—ã•ã›ã¦ãã‚Œã‚’é›†ç´„ã™ã‚Œã°ã„ã„ã‚“ã§ã—ã‚‡ï¼Ÿ
ã¯ã„ï¼ãã†ã§ã™ï¼ ã§ã‚‚è¤‡æ•°å°ã®PCã®ç”¨æ„ã‚’èª°ãŒã™ã‚‹ã‚“ã§ã—ã‚‡ã†ï¼Ÿ ã‚„ã‚ŠãŸããªã„ã§ã™ã‚ˆã­ï¼Ÿ

JuliaHub ã‚’ä½¿ã†ã¨ãƒœã‚¿ãƒ³ä¸€ã¤ã§ã‚ãŸã‹ã‚‚è¤‡æ•°å°ã®PCã‚’ç”¨æ„ã—ãŸç’°å¢ƒã‚’ä½œæˆã—ã¦ãã‚Œã¾ã™ï¼

## Job List ã«è¡Œã

JuliaHubã«ãƒ­ã‚°ã‚¤ãƒ³å¾Œï¼Œç”»é¢å³ä¸Šã«ã‚ã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã® `COMPUTE` ã‹ã‚‰ `Job List` ã«ã„ãã¾ã™.

![](https://storage.googleapis.com/zenn-user-upload/35edb4be9207-20220501.png)

`Start job` ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™.

![](https://storage.googleapis.com/zenn-user-upload/208edda34ccd-20220501.png)

## Submit Job ã®èª¿æ•´

ãƒãƒ¼ãƒ‰ï¼ˆè¨ˆç®—æ©Ÿã®å°æ•°ï¼‰ã‚’ã„ãã¤ç¹‹ã’ã¦è¨ˆç®—ã™ã‚‹ã‹ã¨ã„ã†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã—ã¾ã™ï¼ã“ã“ã§ã¯

```
Start a distributed CPU job with 2 vCPUs per node and 4 GB of memory per vCPU with one Julia process for each vCPU.
```

ã¨ãªã‚‹ã‚ˆã†ã«ï¼‘å°ã‚ãŸã‚Šã®è¨ˆç®—æ©Ÿã«è¦è«‹ã™ã‚‹æ€§èƒ½ã‚’æŒ‡å®šã—ã¾ã™. ã¤ã¾ã‚Š

```
1 å°ã®ãƒã‚·ãƒ³ã«ã¯ï¼’ã¤ä»®æƒ³CPUãŒç©ã‚“ã§ã„ã‚‹. ãƒ¡ãƒ¢ãƒªã¯ 2x4=8GB.
ï¼‘ã¤ã®ä»®æƒ³CPUã«å¯¾ã—ã¦Juliaã®ï¼‘ãƒ—ãƒ­ã‚»ã‚¹ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹
```

Number of Nodes ã‚’ã“ã“ã§ã¯ 64 ã«ã—ã¾ã™. ãã†ã™ã‚‹ã¨ `resulting in 127 worker process` ã¨å°ã•ãæ³¨æ„æ›¸ããŒè¡¨ç¤ºã•ã‚Œã¾ã™. ã“ã“ã§ï¼Œ `127 = 2 x 64 - 1` ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„.

ã“ã‚Œã«ã‚ˆã£ã¦ 127 ã®è¨ˆç®—ã™ã‚‹å¦–ç²¾ã•ã‚“ã‚’æ“ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™. åŠ ãˆã¦å¦–ç²¾ã•ã‚“ã‚’æ“ã‚‹ãƒœã‚¹ã‚’ç”¨æ„ã—ã¾ã™ã®ã§ `nprocs()` ã®å€¤ã¯ 127 + 1 = 128 ã«ãªã‚‹ã¯ãšã§ã™.

### Limit by ã®è¨­å®š

JuliaHub ã¯ä½¿ã£ãŸåˆ†ã ã‘ãŠé‡‘ãŒå–ã‚‰ã‚Œã¾ã™. ã“ã“ã§ã¯ 1 hour åˆ†ã ã‘ä½¿ã†ã‚ˆã†ã«ã—ã¾ã™. ç§ã¯ãƒã‚­ãƒ³ãªã®ã§é€”ä¸­ã§æ­¢ã‚ã¦ã—ã¾ã„ã¾ã™ãŒï¼Œ JuliaHub ã®æ©Ÿèƒ½ãŸæ­£ã—ãå‹•ä½œã™ã‚Œã°é«˜ã€… `$10.88` ã ã‘ã—ã‹ã‹ã‹ã‚‰ãªã„ã¯ãšã§ã™.

## Code ã®è¨­å®š

`# Write code or drop a file here.` ã®ã¨ã“ã‚ã«ä¸Šè¨˜ã§å®Ÿè¡Œã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã¾ã™. 

ä»Šå›ã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã‘ã§æ¸ˆã‚€ã‚³ãƒ¼ãƒ‰ãªã®ã§ `Project TOML file` ãªã©ã®æŒ‡å®šã¯ä¸è¦ã§ã™. å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†å ´åˆã¯ Project.toml ã‚’æ‰‹å…ƒã§ä½œæˆã—ãã‚Œã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ä½œæ¥­ãŒå¿…è¦ã§ã™.

## ã“ã“ã¾ã§ã®çŠ¶æ…‹

ã“ã“ã¾ã§ã®èª¬æ˜ã«å¾“ã†ã¨ã¿ãªã•ã‚“ã®æ‰‹å…ƒã®ç”»é¢ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªç”»é¢ã«ãªã‚‹ã¯ãšã§ã™ï¼

![](https://storage.googleapis.com/zenn-user-upload/f590ef7c1920-20220501.png)

è¦šæ‚Ÿã¯ã„ã„ã§ã™ã‹ï¼Ÿ `Start` ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã—ã‚‡ã†ï¼

# ã½ã¡ãƒï¼ï¼

Start ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã‚¸ãƒ§ãƒ–ãŒå®Ÿè¡Œã•ã‚Œã¾ã™. 

![](https://storage.googleapis.com/zenn-user-upload/9cfd2c91036f-20220501.png)

ã—ã°ã‚‰ãã™ã‚‹ã¨ Job List ã®ãƒšãƒ¼ã‚¸ã«æˆ»ã‚Šã¾ã™ï¼ä¸‹å›³ã®ã‚ˆã†ã«ç ‚æ™‚è¨ˆãƒãƒ¼ã‚¯ãŒã¤ã„ã¦ã„ã‚‹ãƒªã‚¹ãƒˆãŒå‡ºã¦ãã¾ã™ï¼

![](https://storage.googleapis.com/zenn-user-upload/09da1697df00-20220501.png)

## Logs ã®ç”»é¢

`Logs` ã®ãƒªãƒ³ã‚¯ã‚’æŠ¼ã™ã¨ã‚¸ãƒ§ãƒ–ãŒå®Ÿè¡Œã—ã¦ã„ã‚‹æœ€ä¸­ã«ç™ºç”Ÿã™ã‚‹å‡ºåŠ›ã‚’ç›£è¦–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼

![](https://storage.googleapis.com/zenn-user-upload/f3ddad87f2e6-20220501.png)

ï¼–ï¼”å€‹ã®ãƒãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã®ã§æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ï¼ `^^;`

## `@info` ã¯ä¾¿åˆ©ã‚ˆï¼Ÿ

å…ˆã»ã©ã®ã‚³ãƒ¼ãƒ‰ã« `@info` macro ãŒæŒ¿å…¥ã•ã‚Œã¦ã„ã‚‹ã“ã¨æ€ã„å‡ºã—ã¾ã—ã‚‡ã†ï¼

```julia
@info "progress logging:" k=k n=n elapsed_time=ret.time log10_elapsed_time=log10(ret.time) pi_approx=ret.value
```

ã“ã‚Œã‚’ã‚³ãƒ¼ãƒ‰ã«æ›¸ã„ã¦ãŠãã¨ãƒ­ã‚°ã¨ã—ã¦å€¤ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã ã‘ã§ãªã JuliaHub ãŒãã‚Œã‚‰ã®å€¤ã‚’åé›†ã—ã‚°ãƒ©ãƒ•ã‚’ä½œã£ã¦ãã‚Œã¾ã™.

ä¸‹è¨˜ã®å›³ã®å·¦ä¸‹ã«ã‚ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚°ãƒ©ãƒ•ã‚’æç”»ã™ã‚‹ç©ºé–“ãŒå‡ºã¦ãã¾ã™ï¼

![](https://storage.googleapis.com/zenn-user-upload/6185bcd8d3f5-20220501.png)

ã“ã“ã§ `X:` ã®éƒ¨åˆ†ã®ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®å€¤ã¨ã—ã¦ `n` ã‚’ Y: ã®æ–¹ã‚’ `elapsed_time` ã¨ã—ã¾ã—ã‚‡ã†ï¼

![](https://storage.googleapis.com/zenn-user-upload/3b2f26d2bec8-20220501.png)

ãã†ã™ã‚‹ã¨ä¸‹è¨˜ã®ã‚ˆã†ãªç·šå½¢ã«ä¼¸ã³ã‚‹ã‚°ãƒ©ãƒ•ãŒè¦‹ãˆã‚‹ã§ã—ã‚‡ã†.

![](https://storage.googleapis.com/zenn-user-upload/1da4ba39236d-20220501.png)

ã“ã‚Œã¯å®Ÿè¡Œæ™‚é–“ãŒãƒ«ãƒ¼ãƒ—ã®æ•° `n = 10^k` åˆ†ã®è©¦è¡Œã«æ¯”ä¾‹ã—ã¦ã„ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¦ã„ã¾ã™.

## æ‰‹å…ƒã®ç’°å¢ƒã¨æ¯”è¼ƒ

ã•ã¦ï¼Œã€€X è»¸ã‚’ `n` ã¨ã—ã¦ãŠãã¨å€¤ãŒå¤§ãã„ã®ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã¥ã‚‰ã„ã§ã™ï¼ ãã“ã§ X è»¸ã®å€¤ã‚’ `k` ã§ã¨ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™.

![](https://storage.googleapis.com/zenn-user-upload/921bc40b6f67-20220501.png)

ãƒã‚¦ã‚¹ã‚ªãƒ¼ãƒã—ãŸç®‡æ‰€ã‹ã‚‰ `k = 11` ã®å ´åˆã ã¨ 6 ç§’ã§çµ‚äº†ã—ãŸã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸ.

ã¡ãªã¿ã«æ‰‹å…ƒã®ç’°å¢ƒã®ãƒ­ã‚°ã‚’è¦‹è¿”ã™ã¨ä¸‹è¨˜ã®é€šã‚Š `elapsed_time = 132.697088801` ã ã£ãŸã®ã§
ãŸãã•ã‚“ã®å¦–ç²¾ã•ã‚“ãŒåƒã JuliaHub ã®æ€§èƒ½ã¯ã™ã”ã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã­:

```console
â”Œ Info: progress logging:
â”‚   k = 11
â”‚   n = 100000000000
â”‚   elapsed_time = 132.697088801
â”‚   log10_elapsed_time = 2.1228613951211797
â””   pi_approx = 3.1415873828
```

ã•ã¦ï¼Œ æ‰‹å…ƒã®ãƒã‚·ãƒ³ã§è¨ˆç®—ã§ããªã‹ã£ãŸ `k = 12, 13` ã®ã‚±ãƒ¼ã‚¹ã¯JuliaHubã ã¨å„ã€…60ç§’ã¨600ç§’ç¨‹åº¦ã§æ¸ˆã‚“ã§ã„ã¾ã™.

![](https://storage.googleapis.com/zenn-user-upload/887d2b530857-20220501.png)

`for k in 1:13` ã®ã‚¿ã‚¹ã‚¯å…¨ã¦ã‚’å›ã—ã¦ã‚‚å¤§ä½“ï¼‘ï¼“åˆ†ã»ã©ã§ã™ã¿ã¾ã—ãŸï¼ ã‚¯ãƒ©ã‚¦ãƒ‰ç ´ç”£ã›ãšã«ã™ã¿ãã†ã§ã™ï¼

# ã¾ã¨ã‚

- ä¸¦åˆ—è¨ˆç®—ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¨˜è¿°ã—ãã‚Œã‚’ JuliaHub ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸï¼
- æ‰‹å…ƒã§ã™ãã«ç¢ºèªãŒé›£ã—ã„è¦æ¨¡ã®ã‚‚ã®ã§ã‚‚ãƒãƒ¼ãƒ‰æ•°ã‚’çˆ†ä¸Šã’ã•ã›ã¦ç¾å®Ÿçš„ãªæ™‚é–“ã¨ãŠé‡‘ã§è¨ˆç®—ã‚’å›ã™ã“ã¨ãŒã§ãã¾ã—ãŸï¼
- JuliaHub ã®ç„¡æ–™æ ã¯ 25 ãƒ‰ãƒ«ã‚ã‚Šã¾ã™ã®ã§ä¸€å›ç¨‹åº¦ãªã‚‰å‹•ã‹ã—ã¦ã‚‚ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã„ã¾ã™ï¼ 
- å†’é ­ã«ã‚‚æ›¸ãã¾ã—ãŸã‘ã‚Œã©æ™®æ®µã‚¹ãƒ‘ã‚³ãƒ³ã‚’ä½¿ã£ã¦ã„ã‚‹æ–¹ãŒã„ã¾ã—ãŸã‚‰ã“ã®æ©Ÿä¼šã«ãŠè©¦ã—ä½¿ã£ãŸæ„Ÿæƒ³ã‚’ã‚·ã‚§ã‚¢ã—ã¦ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ï¼









